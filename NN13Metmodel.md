#Exporatory search for optimal NN bodyplan

Try 0.1: shallow network 27 inputs 1 logistic output  27-1 (N=10), size=27

AreaUnderCurve 0.62597257499631 (0.5059895099486403, 0.7459556400439796)
OptimalThreshold 0.7376999999999999 (0.5125373686584171, 0.9628626313415827)
Accuracy 0.7603104794376631 (0.7232428388329374, 0.7973781200423887)
Prevalence 0.3099834759789618 (0.2775888772248334, 0.34237807473309023)
Sensitivity 0.48410074098289196 (0.3910267222927206, 0.5771747596730633)
Specificity 0.8763172071753702 (0.8247377669597603, 0.9278966473909801)
FalseNegRate 0.5158992590171081 (0.4228252403269368, 0.6089732777072794)
FalsePosRate 0.1236827928246298 (0.0721033526090199, 0.1752622330402397)
PosPredValue 0.6527071025734709 (0.5830888447068278, 0.722325360440114)
NegPredValue 0.7937522572910322 (0.7669633486743058, 0.8205411659077585)
FalseDiscRate 0.34729289742652913 (0.277674639559886, 0.41691115529317224)
FalseOmitRate 0.2062477427089679 (0.17945883409224161, 0.23303665132569418)
PosLikelihoodRatio 4.7505034774848856 (3.345359703144746, 6.155647251825025)
NegLikelihoodRatio 0.5876781970424879 (0.493433800102837, 0.6819225939821388)
DiagnosticOddsRatio 8.621251039809865 (5.694508935629864, 11.547993143989865)
F1Score 0.5473950388875295 (0.46809423260039196, 0.626695845174667)

Try 0.2: 2-level network 27-50-1 (N=10) size = 1400

AreaUnderCurve 0.6799384229108766 (0.5908528296804064, 0.7690240161413467)
OptimalThreshold 0.7988 (0.573426923148634, 1.024173076851366)
Accuracy 0.7579294001330207 (0.7129925473774967, 0.8028662528885446)
Prevalence 0.30173227649159795 (0.2758874639905039, 0.327577088992692)
Sensitivity 0.3427293612819929 (0.20453458437533031, 0.4809241381886554)
Specificity 0.9378427537436732 (0.9066347399109789, 0.9690507675763675)
FalseNegRate 0.6572706387180071 (0.5190758618113445, 0.7954654156246697)
FalsePosRate 0.06215724625632675 (0.03094923242363239, 0.09336526008902112)
PosPredValue 0.7030844155844156 (0.6111083847871668, 0.7950604463816644)
NegPredValue 0.7710689889502983 (0.7227450769097955, 0.8193929009908011)
FalseDiscRate 0.29691558441558435 (0.20493955361833552, 0.3888916152128332)
FalseOmitRate 0.22893101104970173 (0.1806070990091989, 0.27725492309020455)
PosLikelihoodRatio 7.52890142021721 (3.6730863783980885, 11.38471646203633)
NegLikelihoodRatio 0.6969129690172329 (0.5555716457054292, 0.8382542923290366)
DiagnosticOddsRatio 12.134815785521667 (5.661188668821746, 18.60844290222159)
F1Score 0.4380723393298355 (0.31747508334593677, 0.5586695953137343)

Try 0.3: 3-level network 27-50-10-1 (N=10) size = 1860

AreaUnderCurve 0.6794108624181876 (0.5920504270382136, 0.7667712977981616)
OptimalThreshold 0.8579000000000001 (0.7335501766507174, 0.9822498233492828)
Accuracy 0.7686637837755783 (0.7299778416197037, 0.8073497259314529)
Prevalence 0.2824030052965879 (0.24557910941840788, 0.31922690117476793)
Sensitivity 0.37272486027903984 (0.23444000454210295, 0.5110097160159768)
Specificity 0.9199877179663881 (0.8873797241608077, 0.9525957117719686)
FalseNegRate 0.6272751397209602 (0.4889902839840232, 0.7655599954578971)
FalsePosRate 0.08001228203361185 (0.04740428822803148, 0.11262027583919224)
PosPredValue 0.5987285671844494 (0.43353687633377225, 0.7639202580351266)
NegPredValue 0.7921648413120461 (0.7512631466468506, 0.8330665359772417)
FalseDiscRate 0.40127143281555044 (0.23607974196487327, 0.5664631236662276)
FalseOmitRate 0.20783515868795394 (0.16693346402275838, 0.2487368533531495)
PosLikelihoodRatio 5.1440512027409415 (2.630182414353886, 7.657919991127997)
NegLikelihoodRatio 0.6787339302429961 (0.5425883468583653, 0.8148795136276269)
DiagnosticOddsRatio 9.335098697598697 (3.199809267320699, 15.470388127876696)
F1Score 0.4476611707561151 (0.3045891718378949, 0.5907331696743353)

Try 0.4: narrow network 27-10-10-10-10-1 (N=10) size= 580
AreaUnderCurve 0.6833751407362547 (0.6070545442092798, 0.7596957372632296)
OptimalThreshold 0.8020999999999999 (0.5074039300945934, 1.0967960699054065)
Accuracy 0.7118474699958972 (0.6785275160817246, 0.7451674239100698)
Prevalence 0.3195112605701977 (0.28584378150687423, 0.35317873963352114)
Sensitivity 0.374927580944205 (0.26204051772685516, 0.4878146441615548)
Specificity 0.8631269497932219 (0.7921798015384205, 0.9340740980480233)
FalseNegRate 0.625072419055795 (0.5121853558384452, 0.7379594822731449)
FalsePosRate 0.13687305020677826 (0.06592590195197685, 0.20782019846157967)
PosPredValue 0.5861859668109668 (0.5276943339159987, 0.6446775997059349)
NegPredValue 0.7505036734940264 (0.7182298454049543, 0.7827775015830984)
FalseDiscRate 0.4138140331890332 (0.35532240029406514, 0.47230566608400126)
FalseOmitRate 0.24949632650597367 (0.21722249841690153, 0.2817701545950458)
PosLikelihoodRatio 3.2613974537823642 (2.3582397232885386, 4.16455518427619)
NegLikelihoodRatio 0.7146234498065944 (0.6263768013651698, 0.802870098248019)
DiagnosticOddsRatio 4.648040446481622 (3.326210651507128, 5.969870241456117)
F1Score 0.43815133046372684 (0.3608809163116656, 0.515421744615788)

Try 0.5: wide network 27-50-50-1 (N=10) size=3900
AreaUnderCurve 0.6955491038566717 (0.6343243742583148, 0.7567738334550286)
OptimalThreshold 0.7751 (0.542688026190506, 1.007511973809494)
Accuracy 0.7621297702875751 (0.740442064934066, 0.7838174756410843)
Prevalence 0.3196880632453473 (0.2791775293355975, 0.36019859715509717)
Sensitivity 0.3878456621351358 (0.22670240979637843, 0.5489889144738932)
Specificity 0.9257338850102641 (0.8846790010480161, 0.9667887689725121)
FalseNegRate 0.6121543378648641 (0.4510110855261067, 0.7732975902036214)
FalsePosRate 0.0742661149897358 (0.03321123102748781, 0.11532099895198379)
PosPredValue 0.7109878547378548 (0.6311605759679574, 0.7908151335077521)
NegPredValue 0.773419440586254 (0.7384781523916627, 0.8083607287808453)
FalseDiscRate 0.28901214526214525 (0.20918486649224788, 0.3688394240320426)
FalseOmitRate 0.2265805594137459 (0.19163927121915464, 0.2615218476083372)
PosLikelihoodRatio 6.305298397508923 (3.9932995468811856, 8.61729724813666)
NegLikelihoodRatio 0.6512004201640007 (0.5000216187945739, 0.8023792215334276)
DiagnosticOddsRatio 10.545590663615874 (6.712601869886858, 14.378579457344891)
F1Score 0.4689359728436989 (0.32279140409756935, 0.6150805415898285)

Try 0.6: huge network 27-50-50-50-50-1 (N=10) size=8900
AreaUnderCurve 0.6194143989110822 (0.5318980928865689, 0.7069307049355955)
OptimalThreshold 0.9384 (0.8470822944771419, 1.0297177055228581)
Accuracy 0.7267385870359325 (0.6936366193731162, 0.7598405546987489)
Prevalence 0.32577040563629545 (0.2943080615492795, 0.35723274972331137)
Sensitivity 0.2831442606253819 (0.20910393870325805, 0.35718458254750574)
Specificity 0.9392569320894129 (0.9192218492632003, 0.9592920149156254)
FalseNegRate 0.7168557393746181 (0.6428154174524943, 0.790896061296742)
FalsePosRate 0.06074306791058709 (0.04070798508437453, 0.08077815073679964)
PosPredValue 0.6935595123830417 (0.6235394832198777, 0.7635795415462057)
NegPredValue 0.7312415428362233 (0.6983082615772974, 0.7641748240951493)
FalseDiscRate 0.30644048761695825 (0.23642045845379428, 0.3764605167801222)
FalseOmitRate 0.26875845716377667 (0.23582517590485075, 0.3016917384227026)
PosLikelihoodRatio 5.546762973868237 (3.5059926372907864, 7.5875333104456875)
NegLikelihoodRatio 0.762986586016515 (0.6878487015302066, 0.8381244705028235)
DiagnosticOddsRatio 7.595567580567581 (4.56674419362883, 10.624390967506331)
F1Score 0.3937646070404691 (0.3096854766270393, 0.4778437374538989)

Try 0.7: pencil network 27-10-10-10-10-10-10-10-10-10-10-1 (N=10) size=1360
AreaUnderCurve 0.7874990872700967 (0.6186314537183817, 0.9563667208218116)
OptimalThreshold 0.9972999999999999 (0.9960817910858999, 0.9985182089140998)
Accuracy 0.73179005510987 (0.7051735821124054, 0.7584065281073347)
Prevalence 0.2779923712121501 (0.24962223260550562, 0.30636250981879454)
Sensitivity 0.33104042341574313 (0.18485381654405617, 0.4772270302874301)
Specificity 0.8877527380230976 (0.8476552822848578, 0.9278501937613375)
FalseNegRate 0.668959576584257 (0.52277296971257, 0.8151461834559439)
FalsePosRate 0.11224726197690245 (0.07214980623866257, 0.15234471771514232)
PosPredValue 0.4720410166701726 (0.33130043733228076, 0.6127815960080645)
NegPredValue 0.7787736711244861 (0.7365390104265874, 0.8210083318223849)
FalseDiscRate 0.5279589833298273 (0.3872184039919354, 0.6686995626677191)
FalseOmitRate 0.2212263288755138 (0.17899166817761503, 0.2634609895734126)
PosLikelihoodRatio 2.7608122413309433 (1.7088999801027611, 3.812724502559125)
NegLikelihoodRatio 0.7458985988580994 (0.6045530861461825, 0.8872441115700163)
DiagnosticOddsRatio 4.466573254961412 (1.9809889038701378, 6.952157606052687)
F1Score 0.3738875753367192 (0.2433386143321387, 0.5044365363412997)

Try 0.8: extreme network 27-50-50-50-50-50-50-50-50-50-50-1 (N=20)
AreaUnderCurve 0.6682812539253005 (0.6129349828861135, 0.7236275249644875)
OptimalThreshold 0.9579000000000001 (0.9249250719313351, 0.9908749280686651)
Accuracy 0.7319554032742519 (0.7017414894434807, 0.7621693171050231)
Prevalence 0.3070583007400429 (0.2734949542110366, 0.34062164726904925)
Sensitivity 0.3116770657344604 (0.25625022783679996, 0.36710390363212086)
Specificity 0.9177622839839126 (0.8954716344153084, 0.9400529335525167)
FalseNegRate 0.6883229342655396 (0.6328960963678791, 0.7437497721632)
FalsePosRate 0.08223771601608738 (0.059947066447483204, 0.10452836558469156)
PosPredValue 0.6277433110405247 (0.5561694803911357, 0.6993171416899138)
NegPredValue 0.7501595338295461 (0.7173024465180173, 0.783016621141075)
FalseDiscRate 0.37225668895947533 (0.3006828583100863, 0.4438305196088644)
FalseOmitRate 0.2498404661704539 (0.21698337885892505, 0.2826975534819828)
PosLikelihoodRatio 5.513134018139652 (3.296892728151853, 7.729375308127452)
NegLikelihoodRatio 0.749878388349517 (0.6926374860172411, 0.807119290681793)
DiagnosticOddsRatio 7.994594413393301 (4.345982477181856, 11.643206349604746)
F1Score 0.40391760685395905 (0.3455676659490137, 0.4622675477589044)

------
## Refine Statistics - Increase ensemble size N = 100
 Try pencil and shallow networks with N=100

Try 1.1: shallow network 27 inputs 1 logistic output  27-1 (N=100), size=27

AreaUnderCurve 0.6713967859738417 (0.6461979808083234, 0.69659559113936)
OptimalThreshold 0.7194400000000001 (0.6519680216793343, 0.7869119783206658)
Accuracy 0.7576618256027614 (0.7460527564287754, 0.7692708947767474)
Prevalence 0.3196293887510106 (0.3093198172643344, 0.3299389602376868)
Sensitivity 0.4937404699248477 (0.46686259298088156, 0.5206183468688138)
Specificity 0.8793368642974158 (0.8655198680464167, 0.8931538605484148)
FalseNegRate 0.5062595300751522 (0.4793816531311861, 0.5331374070191184)
FalsePosRate 0.1206631357025842 (0.10684613945158508, 0.13448013195358333)
PosPredValue 0.6767064887985339 (0.6499661968779765, 0.7034467807190913)
NegPredValue 0.7888147382016223 (0.777612014359166, 0.8000174620440785)
FalseDiscRate 0.32329351120146627 (0.29655321928090883, 0.3500338031220237)
FalseOmitRate 0.2111852617983778 (0.1999825379559216, 0.22238798564083398)
PosLikelihoodRatio 6.399681330942999 (5.338266543987785, 7.461096117898213)
NegLikelihoodRatio 0.5758619685794988 (0.546896603443607, 0.6048273337153905)
DiagnosticOddsRatio 12.360378516589234 (10.219266133094802, 14.501490900083667)
F1Score 0.5562613705229164 (0.5337295341250451, 0.5787932069207876)

Try 1.7: pencil network 27-10-10-10-10-10-10-10-10-10-10-1 (N=100) size=1360

AreaUnderCurve 0.7716225599931396 (0.7379262339511878, 0.8053188860350913)
OptimalThreshold 0.88959 (0.8319918989076405, 0.9471881010923595)
Accuracy 0.7172153828595306 (0.7073399460044338, 0.7270908197146273)
Prevalence 0.30844833142408384 (0.2976341707680301, 0.31926249208013757)
Sensitivity 0.3429041634216305 (0.3056716074490031, 0.38013671939425786)
Specificity 0.8783478481547692 (0.8623871912135974, 0.894308505095941)
FalseNegRate 0.6570958365783695 (0.619863280605742, 0.6943283925509969)
FalsePosRate 0.12165215184523108 (0.1056914949040593, 0.13761280878640286)
PosPredValue 0.5537644988982601 (0.5187164243301706, 0.5888125734663495)
NegPredValue 0.7550739575877321 (0.7438848125815376, 0.7662631025939266)
FalseDiscRate 0.44623550110173993 (0.4111874265336505, 0.4812835756698294)
FalseOmitRate 0.24492604241226773 (0.23373689740607323, 0.25611518741846223)
PosLikelihoodRatio 3.4509400380402058 (3.0359030148804402, 3.8659770611999713)
NegLikelihoodRatio 0.7407385306457265 (0.7047274722864497, 0.7767495890050032)
DiagnosticOddsRatio 5.196570643328462 (4.496313825762556, 5.896827460894368)
F1Score 0.39990133667193883 (0.3663812100715439, 0.4334214632723338)

---
## Run pencil network on eGFR60MA stratum
Try 2.7: pencil network 27-10-10-10-10-10-10-10-10-10-10-1 (N=100) size=1360

AreaUnderCurve 1.0078087203490953 (0.9495511686565022, 1.0660662720416882)
OptimalThreshold 0.66592 (0.5783831652095521, 0.7534568347904478)
Accuracy 0.71537318477118 (0.7016994854325137, 0.7290468841098462)
Prevalence 0.5065375642927692 (0.48831351534844, 0.5247616132370984)
Sensitivity 0.6760128498952028 (0.6422347596635529, 0.7097909401268527)
Specificity 0.744128571591807 (0.714809503974718, 0.773447639208896)
FalseNegRate 0.3239871501047972 (0.29020905987314727, 0.3577652403364471)
FalsePosRate 0.2558714284081931 (0.22655236079110408, 0.2851904960252821)
PosPredValue 0.732020385574178 (0.7057845934251649, 0.7582561777231912)
NegPredValue 0.7031519175698743 (0.6807346068970299, 0.7255692282427186)
FalseDiscRate 0.26797961442582185 (0.24174382227680874, 0.29421540657483497)
FalseOmitRate 0.2968480824301258 (0.2744307717572814, 0.31926539310297014)
PosLikelihoodRatio 3.301511490687962 (2.9645752180608427, 3.638447763315081)
NegLikelihoodRatio 0.42769143375619995 (0.3895714683785552, 0.4658113991338447)
DiagnosticOddsRatio 10.082462301587302 (8.543643392169813, 11.621281211004792)
F1Score 0.6904372016373332 (0.6654963776873724, 0.7153780255872941)

-- W O W

---

## Now Check pencil network with only clinical variables
Try 3.7 pencil network 27-10-10-10-10-10-10-10-10-10-10-1 (N=3) size=1360
clinical variables only on eGFR60MA stratum
AreaUnderCurve 0.5397236603920262 (0.4370258211575859, 0.6424214996264666)
OptimalThreshold 0.5579999999999999 (0.41475763172189817, 0.7012423682781017)
Accuracy 0.7866795366795367 (0.694340255798682, 0.8790188175603915)
Prevalence 0.280055265349383 (0.128010974461806, 0.43209955623696006)
Sensitivity 0.4221014492753623 (0.10459457634054214, 0.7396083222101825)
Specificity 0.924616858237548 (0.8106351167385409, 1.038598599736555)
FalseNegRate 0.5778985507246377 (0.26039167778981753, 0.8954054236594579)
FalsePosRate 0.0753831417624521 (-0.03859859973655487, 0.18936488326145906)
PosPredValue 0.7023809523809524 (0.5668601297474002, 0.8379017750145047)
NegPredValue 0.8063847429519071 (0.6850434155464924, 0.9277260703573218)
FalseDiscRate 0.2976190476190476 (0.16209822498549525, 0.4331398702526)
FalseOmitRate 0.19361525704809288 (0.07227392964267812, 0.3149565844535076)
PosLikelihoodRatio 6.4773550724637685 (0.6615234260844263, 12.29318671884311)
NegLikelihoodRatio 0.6214091614906833 (0.34983562202209706, 0.8929827009592695)
DiagnosticOddsRatio 10.242424242424242 (4.896704184049626, 15.58814430079886)
F1Score 0.5163561076604556 (0.3110963993531418, 0.7216158159677694)

-- Double W O W
